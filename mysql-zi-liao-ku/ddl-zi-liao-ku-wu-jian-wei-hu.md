---
description: ÂèÉÁÖßË¨õÁæ©p.165 p.193
---

# DDLË≥áÊñôÂ∫´Áâ©‰ª∂Á∂≠Ë≠∑

## Êñ∞Â¢ûÁâ©‰ª∂CREATE  TABLE\(p.167\)

`CREATE TABLE [IF NOT EXISTS] Ë°®Ê†ºÂêçÁ®±  
(Ê¨Ñ‰ΩçÂêçÁ®±1 Ê¨Ñ‰ΩçÂûãÂà•1 [DEFAULT 'È†êË®≠ÂÄº'][NOT NULL] [PRIMARY KEY],  
 Ê¨Ñ‰ΩçÂêçÁ®±2 Ê¨Ñ‰ΩçÂûãÂà•2,  
 ...  
 Ê¨Ñ‰ΩçÂêçÁ®±n Ê¨Ñ‰ΩçÂûãÂà•n,  
)[ENGINE ÂÑ≤Â≠òÂºïÊìé];`

{% tabs %}
{% tab title="First Tab" %}
```sql
CREATE TABLE IF NOT EXISTS dept               -- (p.169)
(    deptno SMALLINT(4) NOT NULL PRIMARY KEY, -- Ê¨Ñ‰ΩçÂêç Ê¨Ñ‰ΩçÂûãÂà• ‰∏çÁÇ∫Á©∫ÂÄº ‰∏ªÈçµ
     dname VARCHAR(14) NOT NULL,
     Loc VAARCHAR(14) DEFAULT 'M',            -- Ê¨Ñ‰ΩçÂêç Ê¨Ñ‰ΩçÂûãÂà• È†êË®≠ÂÄºM
)ENGINE InnoDB;                               -- ÂÑ≤Â≠òÂºïÊìéInnoDB
```
{% endtab %}

{% tab title="Second Tab" %}
```sql
-- „Äå[CNSTRAINT ‰∏ªÈçµÂêçÁ®±] PRIMARY KEY(Ê¨Ñ‰ΩçÂêçÁ®±,...)„Äç            -- üî∂„ÄêCNSTRAINT„Äë
CREATE TABLE item12
(    ordid int not null,          -- Ê¨Ñ‰ΩçÂêç Ê¨Ñ‰ΩçÂûãÂà• ‰∏çÁÇ∫Á©∫ÂÄº
     itemid smallint not null,    -- Ê¨Ñ‰ΩçÂêç Ê¨Ñ‰ΩçÂûãÂà• ‰∏çÁÇ∫Á©∫ÂÄº
     CONSTRAINT pk_item_ordid_itemid PRIMARY KEY(ordid,itemid)-- üî∏Ë§áÂêà‰∏ªÈçµ
);
```

```sql
-- „ÄåAUTO_INCREMENT„ÄçËá™ÂãïÂ¢ûÂä†ex. ÊµÅÊ∞¥Ëôü            -- „Äêüî∂AUTO_INCREMENT„Äë
CREATE TABLE ord2
(    oredid INT AUTO_INCREMENT PRIMARY KEY,     -- Ê¨Ñ‰ΩçÂêç Ê¨Ñ‰ΩçÂûãÂà• Ëá™ÂãïÂ¢ûÂä† PK
     ord_date DATE,                             -- Ê¨Ñ‰ΩçÂêç Ê¨Ñ‰ΩçÂûãÂà•
)AUTO_INCREMENT = 101;                          -- üî∏ÊµÅÊ∞¥ËôüËµ∑ÂßãÁ¢º
```

```sql
--„ÄåUNIQUE„ÄçÂîØ‰∏ÄÈçµ      -- üî∂„ÄêUNIQUE„Äë
CREATE TABLE emp
(...,
 VARCHAR(200) UNIQUE, -- üî∏
 ...,
);


-- Ë§áÂêàÂîØ‰∏ÄÈçµ
CREATE TABLE item
( order INT NOT NULLk
  items SMALLINT NUT NULL,
  prodid smallint,
  CONSTRAINT uk_item_ordid_prodid UNIQUE(ordid,prodid)-- üî∏
);
```
{% endtab %}
{% endtabs %}

### Â§ñ‰æÜÈçµFK \(p.174\)

* ON DELETE
* ON UPDATE

{% tabs %}
{% tab title="Ê†ºÂºè" %}
```text
-- Êñ∞Â¢û
CREATE TABLE table
(...
    [CONSTRAINT ‰∏ªÈçµÂêç]
    FOREIGN KEY(Ê¨Ñ‰ΩçÂêç,...) REFERENCE Â§ñ‰æÜË°®Ê†º(Â§ñ‰æÜË°®Ê†ºÊ¨Ñ)
);
```

```text
/* üî∂RESTRICT ÈôêÂà∂Ôºå
    Â≠êË°®ÊúâÔºåÈôÑË°®Â∞±‰∏çÂáÜÊîπ
    ‰æãÂ¶ÇÔºådept, deptno.10 -> 50 [X]‰∏çË°åÊîπ
    Âõ†ÁÇ∫emp.deptnoÊúâ10
*/
```
{% endtab %}

{% tab title="ÁØÑ‰æã" %}
```sql
/* üî∂CASCADE Áõ∏‰æùÊÄß
    Áà∂Ë°®Âà™Â≠êË°®‰∏ÄËµ∑Âà™
    ‰æãÂ¶ÇÔºådept.deptno 10 -> delete
    emp.deptno 10 ÂÖ®Âà™
*/
CREATE TABLE t2           --üîπ(p.10-23---p.176)
(fk SMALLINT,
 c2 CHAR(2),
 FOREIGN KEY(fk) REFERENCES t1(pk) ON DELETE CASCADE -- üî∏„ÄêON DELETE CASCADE„Äë
 -- Áà∂Â≠ê‰∏ÄËµ∑Âà™
);

/*---------------------------------------------------------------*/

CREATE TABLE t2           --üîπ(p.10-25---p.177)
(fk SMALLINT,
 c2 CHAR(2),
 FOREIGN KEY(fk) REFERENCES t1(pk) ON UPDATE CASCADE -- üî∏„ÄêON UPDATE CASCADE„Äë
 -- Áà∂Â≠ê‰∏ÄËµ∑Êîπ
);
```

```sql
/* üî∂SET NULL Ë®≠ÊàêÁ©∫ÂÄº
    Áà∂Ë°®ÊîπÔºåÂ≠êË°®Ê∏ÖÊàêÁ©∫ÂÄº
    ‰æãÂ¶ÇÔºådept.deptno 10 -> delete
    emp.deptno 10 -> Null
*/
CREATE TABLE t2           --üîπ(p.10-24---p.176)
(fk SMALLINT,
 c2 CHAR(2),
 FOREIGN KEY(fk) REFERENCES t1(pk) ON DELETE SET NULL -- üî∏„ÄêON DELETE SET NULL„Äë
-- Áà∂Âà™ÔºåÂ≠êNULL
);

/*---------------------------------------------------------------*/

CREATE TABLE t2           --üîπ(p.10-26---p.177)
(fk SMALLINT,
 c2 CHAR(2),
 FOREIGN KEY(fk) REFERENCES t1(pk) ON UPDATE SET NULL -- üî∏„ÄêON UPDATE SET NULL „Äë
 -- Áà∂ÊîπÔºåÂ≠êNULL
);
```
{% endtab %}
{% endtabs %}

### ‰ΩøÁî®ÁèæÊúâË≥áÊñôÂª∫Á´ãÊñ∞ÁöÑË≥áÊñôË°®\(p.178\)

`CREATE TABLE Ë°®Ê†ºÂêç[(Ê¨Ñ‰ΩçÂêç)]  
  ‚ÄãAS  
  SELECT Ê¨Ñ‰ΩçÂêç  
  FROM Ë°®Ê†ºÂêç  
  WHERE Ê¢ù‰ª∂`

{% tabs %}
{% tab title="‰ΩøÁî®ÁèæÊúâË≥áÊñôÂª∫Á´ãÊñ∞ÁöÑË≥áÊñôË°®" %}
```sql
-- Áî®Â≠êÊü•Ë©¢„ÄÇÁî®ÈÉ®ÂàÜÊ¨Ñ‰ΩçÂª∫Á´ãÊñ∞Ë°®Ê†º
CREATE TABLE emp10
  ‚ÄãAS
  SELECT     empno,ename,job,sal
  FROM       emp
  WHERE      deptno = 10;

/*mysql> desc emp10;
+-------+--------------+------+-----+---------+-------+
| Field | Type         | Null | Key | Default | Extra |
+-------+--------------+------+-----+---------+-------+
| empno | int          | NOüîπ |     | NULL    |       |
| ename | varchar(10)  | YES  |     | NULL    |       |
| job   | varchar(9)   | YES  |     | NULL    |       |
| sal   | decimal(7,2) | YES  |     | NULL    |       |
+-------+--------------+------+-----+---------+-------+
4 rows in set (0.00 sec)*/
```
{% endtab %}

{% tab title="‰ΩøÁî®LIKEÂ≠êÂè•Âª∫Á´ãË≥áÊñôË°®" %}
* ‰ΩøÁî®LIKEÂ≠êÂè•Âª∫Á´ãÊñ∞Ë°®Ê†º„ÄÇ
* Êñ∞Ë°®Ê†º**Ê≤íÊúâ‰ªª‰ΩïË≥áÊñô**ÔºåË°®Ê†ºÊòØÁ©∫ÁöÑ„ÄÇ
* Êñ∞Ë°®Ê†ºÁöÑÊ¨Ñ‰Ωç„ÄÅÂûãÊÖãÁ≠âÔºàË°®È†≠ÔºâÊúÉË¢´‰øùÁïô„ÄÇ

```
-- Âª∫Á´ã                                (p.180)
mysql> create table emp1 like emp;
Query OK, 0 rows affected (0.13 sec)

-- Êü•Ë©¢üî∏Ë°®È†≠
mysql> desc emp1;
+----------+--------------+------+-----+---------+-------+
| Field    | Type         | Null | Key | Default | Extra |
+----------+--------------+------+-----+---------+-------+
| EMPNO    | int          | NO   | PRI | NULL    |       |
| ENAME    | varchar(10)  | YES  |     | NULL    |       |
| JOB      | varchar(9)   | YES  |     | NULL    |       |
| MGR      | int          | YES  | MUL | NULL    |       |
| HIREDATE | datetime     | YES  |     | NULL    |       |
| SAL      | decimal(7,2) | YES  |     | NULL    |       |
| COMM     | decimal(7,2) | YES  |     | NULL    |       |
| DEPTNO   | int          | NO   | MUL | NULL    |       |
+----------+--------------+------+-----+---------+-------+

-- Êü•Ë©¢üî∏Ê≤íÊúâË≥áÊñô
mysql> select * from emp1;
Empty set (0.00 sec)
```
{% endtab %}
{% endtabs %}

## ‰øÆÊîπÁâ©‰ª∂ALTER  TABLE\(Ê¨Ñ‰Ωç\)\(p.181\)

`ALTER TABLE Ë°®Ê†ºÂêç  
ADD | ALTER | MODIFY | CHANGE | DROP`

{% tabs %}
{% tab title="Êñ∞Â¢ûÊ¨Ñ‰Ωç\(p.181\)" %}
```sql
ALTER TABLE emp10
    ADD COLUMN mgr SMALLINT;
/*„Äêüîπbefore„Äë
mysql> desc emp10;
+-------+--------------+------+-----+---------+-------+
| Field | Type         | Null | Key | Default | Extra |
+-------+--------------+------+-----+---------+-------+
| empno | int          | NO   |     | NULL    |       |
| ename | varchar(10)  | YES  |     | NULL    |       |
| job   | varchar(9)   | YES  |     | NULL    |       |
| sal   | decimal(7,2) | YES  |     | NULL    |       |
+-------+--------------+------+-----+---------+-------+
4 rows in set (0.00 sec)*/

/*„Äêüîπafter„Äë
mysql> desc emp10;
+-------+--------------+------+-----+---------+-------+
| Field | Type         | Null | Key | Default | Extra |
+-------+--------------+------+-----+---------+-------+
| empno | int          | NO   |     | NULL    |       |
| ename | varchar(10)  | YES  |     | NULL    |       |
| job   | varchar(9)   | YES  |     | NULL    |       |
| sal   | decimal(7,2) | YES  |     | NULL    |       |
| mgrüîπ | smallint     | YES  |     | NULL    |       |
+-------+--------------+------+-----+---------+-------+
5 rows in set (0.02 sec)*/
```
{% endtab %}

{% tab title="Êñ∞Â¢ûÂú®Á¨¨‰∏ÄÊ¨Ñ\(p.182\)" %}
```sql
ALTER TABLE emp10
    ADD COLUMN phone VARCHAR(12) DEFAULT '02-66316710' FIRST; -- üî∂„ÄêFIRST„Äë
/*„Äêüîπbefore„Äë
mysql> desc emp10;
+------------+--------------+------+-----+---------+-------+
| Field      | Type         | Null | Key | Default | Extra |
+------------+--------------+------+-----+---------+-------+
| empno      | int          | NO   |     | NULL    |       |
| ename      | varchar(10)  | YES  |     | NULL    |       |
| job        | varchar(9)   | YES  |     | NULL    |       |
| hiredate   | date         | YES  |     | NULL    |       |
| sal        | decimal(7,2) | YES  |     | NULL    |       |
| mgr        | smallint     | YES  |     | NULL    |       |
+------------+--------------+------+-----+---------+-------+
6 rows in set (0.00 sec)


„Äêüîπafter„Äë
mysql> desc emp10;
+----------+--------------+------+-----+-------------+-------+
| Field    | Type         | Null | Key | Default     | Extra |
+----------+--------------+------+-----+-------------+-------+
| phoneüîπ  | varchar(12)  | YES  |     | 02-66316710 |       |
| empno    | int          | NO   |     | NULL        |       |
| ename    | varchar(10)  | YES  |     | NULL        |       |
| job      | varchar(9)   | YES  |     | NULL        |       |
| hiredate | date         | YES  |     | NULL        |       |
| sal      | decimal(7,2) | YES  |     | NULL        |       |
| mgr      | smallint     | YES  |     | NULL        |       |
+----------+--------------+------+-----+-------------+-------+
7 rows in set (0.00 sec)*/
```
{% endtab %}

{% tab title="Êñ∞Â¢ûÊåáÂÆöÊ¨Ñ‰ΩçÂæå\(p.182\)" %}
```sql
ALTER TABLE emp10                       -- 
    ADD COLUMN hiredate DATE AFTER job; -- üî∂„ÄêAFTER„Äë
/*„Äêüîπbefore„Äë
mysql> desc emp10;
+-------+--------------+------+-----+---------+-------+
| Field | Type         | Null | Key | Default | Extra |
+-------+--------------+------+-----+---------+-------+
| empno | int          | NO   |     | NULL    |       |
| ename | varchar(10)  | YES  |     | NULL    |       |
| job   | varchar(9)   | YES  |     | NULL    |       |
| sal   | decimal(7,2) | YES  |     | NULL    |       |
| mgr   | smallint     | YES  |     | NULL    |       |
+-------+--------------+------+-----+---------+-------+
5 rows in set (0.02 sec)*/


/*„Äêüîπafter„Äë
mysql> desc emp10;
+------------+--------------+------+-----+---------+-------+
| Field      | Type         | Null | Key | Default | Extra |
+------------+--------------+------+-----+---------+-------+
| empno      | int          | NO   |     | NULL    |       |
| ename      | varchar(10)  | YES  |     | NULL    |       |
| job        | varchar(9)   | YES  |     | NULL    |       |
| hiredateüîπ | date         | YES  |     | NULL    |       |
| sal        | decimal(7,2) | YES  |     | NULL    |       |
| mgr        | smallint     | YES  |     | NULL    |       |
+------------+--------------+------+-----+---------+-------+
6 rows in set (0.00 sec)*/
```
{% endtab %}
{% endtabs %}

{% tabs %}
{% tab title="ÊîπÊ¨Ñ‰ΩçÈ†êË®≠ALTER" %}
```sql
ALTER TABLE emp10            --(p.184)
ALTER phone DROP DEFAULT;

/*üîπ„Äêbefore„Äë
mysql> desc emp10;
+----------+--------------+------+-----+---------------+-------+
| Field    | Type         | Null | Key | Default       | Extra |
+----------+--------------+------+-----+---------------+-------+
| phone    | varchar(12)  | YES  |     | 02-66316710üîπ |       |
| empno    | int          | NO   |     | NULL          |       |
| ename    | varchar(10)  | YES  |     | NULL          |       |
| job      | varchar(9)   | YES  |     | NULL          |       |
| hiredate | date         | YES  |     | NULL          |       |
| sal      | decimal(7,2) | YES  |     | NULL          |       |
| mgr      | smallint     | YES  |     | NULL          |       |
+----------+--------------+------+-----+---------------+-------+
7 rows in set (0.00 sec)

üîπ„Äêafter„Äë
mysql> desc emp10;
+----------+--------------+------+-----+---------+-------+
| Field    | Type         | Null | Key | Default | Extra |
+----------+--------------+------+-----+---------+-------+
| phone    | varchar(12)  | YES  |     | NULLüîπ  |       |
| empno    | int          | NO   |     | NULL    |       |
| ename    | varchar(10)  | YES  |     | NULL    |       |
| job      | varchar(9)   | YES  |     | NULL    |       |
| hiredate | date         | YES  |     | NULL    |       |
| sal      | decimal(7,2) | YES  |     | NULL    |       |
| mgr      | smallint     | YES  |     | NULL    |       |
+----------+--------------+------+-----+---------+-------+
7 rows in set (0.00 sec)
*/
```
{% endtab %}

{% tab title="ÊîπÊ¨Ñ‰ΩçÂûãÊÖã,È†ÜÂ∫èMODIFY" %}
```sql
ALTER TABLE emp10                --(p.184)
MODIFY COLUMN mgr INT AFTER job; // „ÄêINT„ÄëÊîπÂûãÊÖã‰∫ÜÔºõ„ÄêAFTER job„ÄëÊîπ‰ΩçÁΩÆ‰∫Ü

/*üîπ„Äêbefore„Äë
mysql> desc emp10;
+----------+--------------+------+-----+---------+-------+
| Field    | Type         | Null | Key | Default | Extra |
+----------+--------------+------+-----+---------+-------+
| phone    | varchar(12)  | YES  |     | NULL    |       |
| empno    | int          | NO   |     | NULL    |       |
| ename    | varchar(10)  | YES  |     | NULL    |       |
| job      | varchar(9)   | YES  |     | NULL    |       |
| hiredate | date         | YES  |     | NULL    |       |
| sal      | decimal(7,2) | YES  |     | NULL    |       |
| üü°mgr    | smallintüîπ   | YES  |     | NULL    |       |
+----------+--------------+------+-----+---------+-------+
7 rows in set (0.00 sec)

üîπ„Äêafter„Äë
mysql> desc emp10;
+----------+--------------+------+-----+---------+-------+
| Field    | Type         | Null | Key | Default | Extra |
+----------+--------------+------+-----+---------+-------+
| phone    | varchar(12)  | YES  |     | NULL    |       |
| empno    | int          | NO   |     | NULL    |       |
| ename    | varchar(10)  | YES  |     | NULL    |       |
| job      | varchar(9)   | YES  |     | NULL    |       |
|üü° mgr    | intüîπ        | YES  |     | NULL    |       |
| hiredate | date         | YES  |     | NULL    |       |
| sal      | decimal(7,2) | YES  |     | NULL    |       |
+----------+--------------+------+-----+---------+-------+
7 rows in set (0.00 sec)
*/
```
{% endtab %}

{% tab title="ÊîπÊ¨Ñ‰ΩçÂûãÊÖãMODIFY" %}
```sql
ALTER TABLE emp                            -- (p.185)
MODIFY COLUMN ename VARCHAR(10) NOT NULL;
/*üîπ„Äêbefore„Äë
mysql> desc emp10;
+----------+--------------+------+-----+---------+-------+
| Field    | Type         | Null | Key | Default | Extra |
+----------+--------------+------+-----+---------+-------+
| phone    | varchar(12)  | YES  |     | NULL    |       |
| empno    | int          | NO   |     | NULL    |       |
| ename    | varchar(10)üîπ| YES  |     | NULLüîπ  |       |
| job      | varchar(9)   | YES  |     | NULL    |       |
| mgr      | int          | YES  |     | NULL    |       |
| hiredate | date         | YES  |     | NULL    |       |
| sal      | decimal(7,2) | YES  |     | NULL    |       |
+----------+--------------+------+-----+---------+-------+
7 rows in set (0.00 sec)

üîπ„Äêafter„Äë == ÂéüÊú¨Â∞±‰∏ÄÊ®£.........
mysql> desc emp10;
+----------+--------------+------+-----+---------+-------+
| Field    | Type         | Null | Key | Default | Extra |
+----------+--------------+------+-----+---------+-------+
| phone    | varchar(12)  | YES  |     | NULL    |       |
| empno    | int          | NO   |     | NULL    |       |
| ename    | varchar(10)üîπ| YES  |     | NULLüîπ  |       |
| job      | varchar(9)   | YES  |     | NULL    |       |
| mgr      | int          | YES  |     | NULL    |       |
| hiredate | date         | YES  |     | NULL    |       |
| sal      | decimal(7,2) | YES  |     | NULL    |       |
+----------+--------------+------+-----+---------+-------+
7 rows in set (0.00 sec)
*/
```
{% endtab %}

{% tab title="Êõ¥ÊîπÊ¨Ñ‰ΩçÂêçÁ®±„ÄÅÂûãÊÖãCHANGE" %}
```sql
ALTER TABLE emp10                        -- (p.186)
CHANGE COLUMN sal salary SMALLINT;
/*üîπ„Äêbefore„Äë
mysql> desc emp10;
+----------+--------------+------+-----+---------+-------+
| Field    | Type         | Null | Key | Default | Extra |
+----------+--------------+------+-----+---------+-------+
| phone    | varchar(12)  | YES  |     | NULL    |       |
| empno    | int          | NO   |     | NULL    |       |
| ename    | varchar(10)  | YES  |     | NULL    |       |
| job      | varchar(9)   | YES  |     | NULL    |       |
| mgr      | int          | YES  |     | NULL    |       |
| hiredate | date         | YES  |     | NULL    |       |
| üü°sal    | decimal(7,2) | YES  |     | NULL    |       |
+----------+--------------+------+-----+---------+-------+
7 rows in set (0.00 sec)

üîπ„Äêafter„Äë
mysql> desc emp10;
+----------+-------------+------+-----+---------+-------+
| Field    | Type        | Null | Key | Default | Extra |
+----------+-------------+------+-----+---------+-------+
| phone    | varchar(12) | YES  |     | NULL    |       |
| empno    | int         | NO   |     | NULL    |       |
| ename    | varchar(10) | YES  |     | NULL    |       |
| job      | varchar(9)  | YES  |     | NULL    |       |
| mgr      | int         | YES  |     | NULL    |       |
| hiredate | date        | YES  |     | NULL    |       |
|üü°salary  | smallint    | YES  |     | NULL    |       |
+----------+-------------+------+-----+---------+-------+
7 rows in set (0.00 sec)
*/
```
{% endtab %}
{% endtabs %}

{% hint style="info" %}
CHANGE Ëàá MODIFYÁõ∏‰ººÔºå  
CHANGEÂèØ‰ª•ÈáçÊñ∞ÂëΩÂêçÔºõMODIFY‰∏çËÉΩÈáçÊñ∞ÂëΩÂêç„ÄÇ
{% endhint %}

## Âà™Èô§Áâ©‰ª∂DROP  TABLE

| Âà™Èô§Ê¨Ñ‰Ωç\(Ë°®Ê†ºÂú®„ÄÅË≥áÊñô‰∏çÂú®\) | Âà™Èô§Ë≥áÊñôË°®\(Ë°®Ê†º‰∏çÂú®\) |
| :--- | :--- |
| `ALTER TABLE Ë°®Ê†ºÂêç DROP [COLUMN]` | `DROP TABLE Ë°®Ê†ºÂêç` |

{% tabs %}
{% tab title="Âà™Èô§Ê¨Ñ‰Ωç" %}
```sql
ALTER TABLE dpt1            --(p.186)
DROP COLUMN loc;

/*üîπ„Äêbefore„Äë
mysql> desc dept1;
+--------+-------------+------+-----+---------+-------+
| Field  | Type        | Null | Key | Default | Extra |
+--------+-------------+------+-----+---------+-------+
| DEPTNO | int         | NO   |     | NULL    |       |
| DNAME  | varchar(14) | YES  |     | NULL    |       |
| üü°LOC  | varchar(13) | YES  |     | NULL    |       |
+--------+-------------+------+-----+---------+-------+
3 rows in set (0.08 sec)


üîπ„Äêafter„Äë
mysql> desc dept1;
+--------+-------------+------+-----+---------+-------+
| Field  | Type        | Null | Key | Default | Extra |
+--------+-------------+------+-----+---------+-------+
| DEPTNO | int         | NO   |     | NULL    |       |
| DNAME  | varchar(14) | YES  |     | NULL    |       |
+--------+-------------+------+-----+---------+-------+
2 rows in set (0.00 sec)
*/
```
{% endtab %}

{% tab title="Âà™Èô§Ë≥áÊñôË°®" %}
```sql
DROP TABLE emp10a;
```
{% endtab %}
{% endtabs %}

## Ë¶ñËßÄË°®view

* ËôõÊì¨Ë≥áÊñôË°®ÔºåÊú¨Ë∫´‰∏çÂÑ≤Â≠ò‰ªª‰ΩïË≥áÊñô„ÄÇ
* ÁâπÊÄßÔºö
  * ÂèØÂä†Âº∑ÂÆâÂÖ®ÊÄß„ÄÇÊ™¢Ë¶ñË°®ÂèØ‰ª•Ë®≠ÂÆöÂîØËÆÄ
  * Á∞°ÂåñÊü•Ë©¢Ë§áÈõúÂ∫¶
  * ÁµêÊßãËÆäÊõ¥ÊôÇÔºåÂèØ‰ª•ÊîπviewË®≠ÂÆö‰∏çÈúÄË¶ÅÊîπÁ®ãÂºè„ÄÇ
  * ‰∏ÄË≥áÊñôË°®ÂèØÂª∫Á´ãÂ§öË¶ñËßÄË°®

{% tabs %}
{% tab title="Âª∫Á´ãË¶ñËßÄË°®" %}
Ë™ûÊ≥ïÔºö`CREATE [OR REPLACE] VIEW column  
AS <select_statement>`„Äåor replace„ÄçÊòØÈÅ∏Â°´„ÄÇ

* Âä†‰∏ä„Äåor replace„ÄçÔºåÁï∂ÊúâÂêåÂêçÁöÑviewÂ≠òÂú®ÊôÇÔºåË¶ÜËìãÂÆÉ\(alter view\)„ÄÇ
* Âä†‰∏ä„Äåor replace„ÄçÔºåÁï∂Ê≤íÊúâÂêåÂêçÁöÑviewÂ≠òÂú®ÊôÇÔºåÂª∫Á´ã‰∏ÄÂÄã\(create view\)„ÄÇ

### Âª∫Á´ãË¶ñËßÄË°®

```sql
mysql> CREATE VIEW empvu10
    -> AS
    ->   SELECT *
    ->   FROM  emp
    ->   WHERE deptno = 10;
Query OK, 0 rows affected (0.17 sec)

mysql> SELECT * FROM empvu10;
/*
+-------+--------+-----------+------+---------------------+---------+------+--------+
| EMPNO | ENAME  | JOB       | MGR  | HIREDATE            | SAL     | COMM | DEPTNO |
+-------+--------+-----------+------+---------------------+---------+------+--------+
|  7782 | CLARK  | MANAGER   | 7839 | 1981-06-09 00:00:00 | 2450.00 | NULL |     10 |
|  7839 | KING   | PRESIDENT | NULL | 1981-11-17 00:00:00 | 5000.00 | NULL |     10 |
|  7934 | MILLER | CLERK     | 7782 | 1982-01-23 00:00:00 | 1300.00 | NULL |     10 |
+-------+--------+-----------+------+---------------------+---------+------+--------+
3 rows in set (0.03 sec)*/
```

### Âª∫Á´ãË¶ñËßÄË°®ÔºçË®≠ÂÆöÊ¨Ñ‰ΩçÂêçÁ®±

```sql
mysql> CREATE VIEW salvu20 (employee_no, employee, annual_sal)
    -> AS
    -> SELECT empno, ename, sal*12
    -> FROM emp
    -> WHERE deptno = 20;
Query OK, 0 rows affected (0.02 sec)

mysql> SELECT * FROM salvu20;/*
+-------------+----------+------------+
| employee_no | employee | annual_sal |
+-------------+----------+------------+
|        7369 | SMITH    |    9600.00 |
|        7566 | JONES    |   35700.00 |
|        7788 | SCOTT    |   36000.00 |
|        7876 | ADAMS    |   13200.00 |
|        7902 | FORD     |   36000.00 |
+-------------+----------+------------+
5 rows in set (0.00 sec)*/
```

### Âª∫Á´ãË¶ñËßÄË°®ÔºçË®≠ÂÆöÊ¨Ñ‰ΩçÂêçÁ®±\(Âà•Âêç\)

```sql
mysql> CREATE VIEW salvu30
    -> AS
    -> SELECT empno 'employee_number', ename 'name', sal 'salary'
    -> FROM emp
    -> WHERE deptno = 30;
Query OK, 0 rows affected (0.01 sec)

mysql> SELECT * FROM salvu30;/*
+-----------------+--------+---------+
| employee_number | name   | salary  |
+-----------------+--------+---------+
|            7499 | ALLEN  | 1600.00 |
|            7521 | WARD   | 1250.00 |
|            7654 | MARTIN | 1250.00 |
|            7698 | BLAKE  | 2850.00 |
|            7844 | TURNER | 1500.00 |
|            7900 | JAMES  |  950.00 |
+-----------------+--------+---------+
6 rows in set (0.00 sec)*/
```
{% endtab %}

{% tab title="Âª∫Á´ãË§áÈõúË¶ñËßÄË°®" %}
JOIN ON

```sql
mysql> CREATE VIEW dept_sum_vu(name, minsal, maxsal, avgsal)
    -> AS
    -> SELECT d.dname, MIN(e.sal), MAX(e.sal), AVG(e.sal)
    -> FROM emp e JOIN dept d ON(e.deptno = d.deptno)
    -> GROUP BY d.dname;
/*Query OK, 0 rows affected (0.03 sec)*/

mysql> DESC dept_sum_vu;/*
+--------+---------------+------+-----+---------+-------+
| Field  | Type          | Null | Key | Default | Extra |
+--------+---------------+------+-----+---------+-------+
| name   | varchar(14)   | YES  |     | NULL    |       |
| minsal | decimal(7,2)  | YES  |     | NULL    |       |
| maxsal | decimal(7,2)  | YES  |     | NULL    |       |
| avgsal | decimal(11,6) | YES  |     | NULL    |       |
+--------+---------------+------+-----+---------+-------+
4 rows in set (0.01 sec)*/

mysql>     SELECT * FROM dept_sum_vu;/*
+------------+---------+---------+-------------+
| name       | minsal  | maxsal  | avgsal      |
+------------+---------+---------+-------------+
| ACCOUNTING | 1300.00 | 5000.00 | 2916.666667 |
| RESEARCH   |  800.00 | 3000.00 | 2175.000000 |
| SALES      |  950.00 | 2850.00 | 1566.666667 |
+------------+---------+---------+-------------+
3 rows in set (0.00 sec)*/
```
{% endtab %}

{% tab title="Êü•Ë©¢" %}
Êü•Ë©¢ÂäüËÉΩËàáË≥áÊñôË°®ÂÆåÂÖ®‰∏ÄÊ®£

```sql
mysql> SELECT COUNT(*),SUM(salary) 'sum_sal_30',AVG(salary) 'avg_sal_30'
    -> FROM salvu30;/*
+----------+------------+-------------+
| COUNT(*) | sum_sal_30 | avg_sal_30  |
+----------+------------+-------------+
|        6 |    9400.00 | 1566.666667 |
+----------+------------+-------------+
1 row in set (0.00 sec)*/

mysql> SELECT name, avgsal
    -> FROM dept_sum_vu
    -> WHERE avgsal>2000;/*
+------------+-------------+
| name       | avgsal      |
+------------+-------------+
| ACCOUNTING | 2916.666667 |
| RESEARCH   | 2175.000000 |
+------------+-------------+
2 rows in set (0.00 sec)*/
```
{% endtab %}

{% tab title="Êõ¥Êñ∞" %}
### Êü•Ë©¢viewÊòØÂê¶ÂèØÂü∑Ë°åDMLÂëΩ‰ª§

```sql
mysql> SELECT TABLE_NAME, IS_UPDATABLE
    -> FROM information_schema.views;/*
+-----------------------------------------------+--------------+
| TABLE_NAME                                    | IS_UPDATABLE |
+-----------------------------------------------+--------------+
| film_list                                     | NO           |
| nicer_but_slower_film_list                    | NO           |
| staff_list                                    | YES          |
| sales_by_store                                | NO           |
| sales_by_film_category                        | NO           |
| actor_info                                    | NO           |
| empvu10                                       | YES          |
| salvu20                                       | YES          |
| salvu30                                       | YES          |
| dept_sum_vu                                   | NO           |
+-----------------------------------------------+--------------+
*/
```

### Ë¶ñËßÄË°®ÔºçË≥áÊñôÊõ¥Êñ∞

```sql
mysql> UPDATE salvu30
    -> SET salary = 2000
    -> WHERE employee_number=7499;
Query OK, 1 row affected (0.01 sec)
Rows matched: 1  Changed: 1  Warnings: 0

/*üîπÊü•Ë©¢Ë¶ñËßÄË°®ÂÖßÂÆπ
mysql> SELECT * FROM salvu30;
+-----------------+--------+---------+
| employee_number | name   | salary  |
+-----------------+--------+---------+
|            7499 | ALLEN  | 2000.00 |
|            7521 | WARD   | 1250.00 |
|            7654 | MARTIN | 1250.00 |
|            7698 | BLAKE  | 2850.00 |
|            7844 | TURNER | 1500.00 |
|            7900 | JAMES  |  950.00 |
+-----------------+--------+---------+
6 rows in set (0.00 sec)*/

/*üîπÊü•Ë©¢Âü∫Â∫ïË≥áÊñôË°®
mysql> SELECT empno, ename, job, sal
    ->     FROM emp
    ->     WHERE empno=7499;
+-------+-------+----------+---------+
| empno | ename | job      | sal     |
+-------+-------+----------+---------+
|  7499 | ALLEN | SALESMAN | 2000.00 |
+-------+-------+----------+---------+
1 row in set (0.00 sec)*/
```

### Ë¶ñËßÄË°®ÔºçÂèØÊõ¥Êñ∞Ëàá‰∏çÂèØÊõ¥Êñ∞

 \*Âü∫Â∫ïË≥áÊñôË°®-ÈùûË®àÁÆóÊ¨Ñ‰ΩçÔºåviewÂèØÊõ¥Êñ∞  
 \*Âü∫Â∫ïË≥áÊñôË°®-ÁöÑË®àÁÆóÊ¨Ñ‰ΩçÔºåview‰∏çÂèØÊõ¥Êñ∞ 

```sql
 -- üü°ÂèØÊõ¥Êñ∞ÁöÑË≥áÊñô
mysql>  UPDATE salvu20
    ->  SET employee='mary'
    ->  WHERE employee_no=7902;
Query OK, 1 row affected (0.01 sec)
Rows matched: 1  Changed: 1  Warnings: 0

/*üîπÊü•Ë©¢Ë¶ñËßÄË°®
mysql> SELECT * FROM salvu20;
+-------------+----------+------------+
| employee_no | employee | annual_sal |
+-------------+----------+------------+
|        7369 | SMITH    |    9600.00 |
|        7566 | JONES    |   35700.00 |
|        7788 | SCOTT    |   36000.00 |
|        7876 | ADAMS    |   13200.00 |
|      üî∏7902 | mary     |   36000.00 |
+-------------+----------+------------+
5 rows in set (0.01 sec)*/

 -- üü°‰∏çÂèØÊõ¥Êñ∞ÁöÑË≥áÊñôüëáÁï∂Âàù[annual_sal]ÊòØemp*12Âæó‰æÜÁöÑË®àÁÆóÊ¨Ñ‰ΩçÔºåviewÊòØÁÑ°Ê≥ïÊõ¥Êñ∞ÁöÑ„ÄÇ
mysql>  UPDATE salvu20
    ->  SET annual_sal=48000
    ->  WHERE employee_no=7902;
ERROR 1348 (HY000): Column 'annual_sal' is not updatable
```
{% endtab %}

{% tab title="Êñ∞Â¢û" %}
### Êñ∞Â¢ûË≥áÊñô

```sql
mysql> INSERT INTO empvu10(empno,ename,sal ,deptno)
    -> VALUES(9700,'KEN',3800,10);
Query OK, 1 row affected (0.01 sec)

/*mysql> SELECT * FROM empvu10;
+-------+--------+-----------+------+---------------------+---------+------+--------+
| EMPNO | ENAME  | JOB       | MGR  | HIREDATE            | SAL     | COMM | DEPTNO |
+-------+--------+-----------+------+---------------------+---------+------+--------+
|  7782 | CLARK  | MANAGER   | 7839 | 1981-06-09 00:00:00 | 2450.00 | NULL |     10 |
|  7839 | KING   | PRESIDENT | NULL | 1981-11-17 00:00:00 | 5000.00 | NULL |     10 |
|  7934 | MILLER | CLERK     | 7782 | 1982-01-23 00:00:00 | 1300.00 | NULL |     10 |
|  9700 | KEN    | NULL      | NULL | NULL                | 3800.00 | NULL |     10 |
+-------+--------+-----------+------+---------------------+---------+------+--------+
4 rows in set (0.00 sec)*/
```

### -- Ë∑üË≥áÊñôÊõ¥Êñ∞‰∏ÄÊ®£ÔºåË®àÁÆóÊ¨Ñ‰Ωç‰∏ÄÊ®£‰∏çËÉΩÊñ∞Â¢ûP.11-17

```sql
/*mysql> DESC emp;
+----------+--------------+------+-----+---------+-------+
| Field    | Type         | Null | Key | Default | Extra |
+----------+--------------+------+-----+---------+-------+
| EMPNO    | int          | NO   | PRI | NULL    |       |
| ENAME    | varchar(10)  | YES  |     | NULL    |       |
| JOB      | varchar(9)   | YES  |     | NULL    |       |
| MGR      | int          | YES  | MUL | NULL    |       |
| HIREDATE | datetime     | YES  |     | NULL    |       |
| SAL      | decimal(7,2) | YES  |     | NULL    |       |
| COMM     | decimal(7,2) | YES  |     | NULL    |       |
| DEPTNO   | int          | NO   | MUL | NULL    |       |
+----------+--------------+------+-----+---------+-------+
8 rows in set (0.02 sec)*/

mysql> INSERT INTO salvu20
    -> VALUES(9800,'JACKSON',24000);
/*ERROR 1348 (HY000): Column 'annual_sal' is not updatable*/
```
{% endtab %}

{% tab title="Âà™Èô§" %}
### Âà™Èô§Ë≥áÊñô

```sql
mysql> DELETE FROM empvu10
    -> WHERE empno=9700;
--Query OK, 1 row affected (0.01 sec)

mysql> DELETE FROM salvu30
    -> WHERE name='james';
--Query OK, 1 row affected (0.01 sec)
```

### ÁÑ°Ê≥ïÂà™Èô§ÔºçÈÅïÂèçÂü∫Â∫ïË≥áÊñôË°®ÁöÑË≥áÊñôÊ™¢Êü•Ê¢ù‰ª∂

```sql
/*mysql>  SELECT * FROM salvu20;
+-------------+----------+------------+
| employee_no | employee | annual_sal |
+-------------+----------+------------+
|        7369 | SMITH    |    9600.00 |
|        7566 | JONES    |   35700.00 |
|        7788 | SCOTT    |   36000.00 |
|        7876 | ADAMS    |   13200.00 |
|        7902 | mary     |   36000.00 |
+-------------+----------+------------+
5 rows in set (0.00 sec)*/

mysql>  DELETE FROM salvu20
    ->  WHERE employee_no='7902';
/*ERROR 1451 (23000): Cannot delete or update a parent row: 
a foreign key constraint fails (`demo`.`emp`, CONSTRAINT `EMP_MGR_FK` FOREIGN KEY (`MGR`) REFERENCES `emp` (`EMPNO`))*/
```

###  Ë§áÈõúË¶ñËßÄË°®ÔºçÁÑ°Ê≥ïÂÅöDML p.11-19

```sql
/*mysql> SELECT * FROM dept_sum_vu;
+------------+---------+---------+-------------+
| name       | minsal  | maxsal  | avgsal      |
+------------+---------+---------+-------------+
| ACCOUNTING | 1300.00 | 5000.00 | 2916.666667 |
| RESEARCH   |  800.00 | 3000.00 | 2175.000000 |
| SALES      | 1250.00 | 2850.00 | 1770.000000 |
+------------+---------+---------+-------------+
3 rows in set (0.00 sec)*/

mysql> INSERT INTO dept_sum_vu
    -> VALUES('education',1200,3000,2800);
--ERROR 1471 (HY000): The target table dept_sum_vu of the INSERT is not insertable-into

mysql> UPDATE dept_sum_vu
    -> SET maxsal=4800
    -> WHERE name='sales';
--ERROR 1288 (HY000): The target table dept_sum_vu of the UPDATE is not updatable

mysql> DELETE FROM dept_sum_vu
    -> WHERE name='research';
--ERROR 1288 (HY000): The target table dept_sum_vu of the DELETE is not updatable
```
{% endtab %}

{% tab title="‰øÆÊîπ" %}
### ‰øÆÊîπË¶ñËßÄË°®ÂÖßÂÆπ

-- Â¢ûÂä†„ÄåWHITH CHECK OPTION„ÄçÈÅ∏È†ÖÔºåÈÅïÂèçVIEWÁöÑÊ¢ù‰ª∂Â∞±‰∏çËÉΩ‰øÆÊîπ„ÄÇ

```sql
mysql> ALTER VIEW salvu30
    -> AS
    -> SELECT empno 'employee_number',ename 'name',sal 'salary',deptno
    -> FROM emp
    -> WHERE deptno = 30
    -> WITH CHECK OPTION;-- üü°
--Query OK, 0 rows affected (0.03 sec)

/*mysql> SELECT * FROM salvu30;
+-----------------+--------+---------+--------+
| employee_number | name   | salary  | deptno |
+-----------------+--------+---------+--------+
|            7499 | ALLEN  | 2000.00 |     30 |
|            7521 | WARD   | 1250.00 |     30 |
|            7654 | MARTIN | 1250.00 |     30 |
|            7698 | BLAKE  | 2850.00 |     30 |
|            7844 | TURNER | 1500.00 |     30 |
+-----------------+--------+---------+--------+
5 rows in set (0.02 sec)*/
```

### with check optionÈÅ∏È†ÖÔºçÔºçÂèØÂü∑Ë°å

```sql
/*mysql> SELECT * FROM salvu30;
+-----------------+--------+---------+--------+
| employee_number | name   | salary  | deptno |
+-----------------+--------+---------+--------+
|            7499 | ALLEN  | 2000.00 |     30 |
|            7521 | WARD   | 1250.00 |     30 |
|            7654 | MARTIN | 1250.00 |     30 |
|            7698 | BLAKE  | 2850.00 |     30 |
|            7844 | TURNER | 1500.00 |     30 |
+-----------------+--------+---------+--------+
5 rows in set (0.02 sec)*/

mysql> UPDATE salvu30
    -> SET salary = 2000
    -> WHERE employee_number=7499;
--Query OK, 0 rows affected (0.01 sec)
--Rows matched: 1  Changed: 0  Warnings: 0

mysql> DELETE FROM salvu30 WHERE employee_number=7521;
--Query OK, 1 row affected (0.01 sec)
```

### with check optionÈÅ∏È†ÖÔºçÔºç‰∏çÂèØÂü∑Ë°å

```sql
/*mysql> SELECT * FROM salvu30;
+-----------------+--------+---------+--------+
| employee_number | name   | salary  | deptno |üî∏ÈÉ®ÈñÄÁ∑®ËôüviewÊòØÊäì30
+-----------------+--------+---------+--------+
|            7499 | ALLEN  | 2000.00 |     30 |
|            7521 | WARD   | 1250.00 |     30 |
|            7654 | MARTIN | 1250.00 |     30 |
|            7698 | BLAKE  | 2850.00 |     30 |
|            7844 | TURNER | 1500.00 |     30 |
+-----------------+--------+---------+--------+
5 rows in set (0.02 sec)*/

-- ‰∏çÂèØÈÅïÂèçwhereÂ≠êÂè•ÁöÑÊ¢ù‰ª∂
mysql> UPDATE salvu30
    -> SET deptno = 10                        --üî∏ÈÉ®ÈñÄÁ∑®ËôüviewÊ≤íÊúâ10
    -> WHERE employee_number=7499;
--ERROR 1369 (HY000): CHECK OPTION failed 'demo.salvu30'
```
{% endtab %}

{% tab title="Âà™Èô§Ë¶ñËßÄË°®" %}
-- ÂæûË≥áÊñôÂ∫´‰∏≠Âà™Èô§Ë¶ñËßÄË°®Ôºå‰∏çÊúÉÂà™Èô§‰ªª‰Ωï\(Âü∫Â∫ï\)Ë≥áÊñô

```sql
mysql> DROP VIEW dept_sum_vu;
--Query OK, 0 rows affected (0.04 sec)
```
{% endtab %}

{% tab title="ÂÖßÂµåË¶ñËßÄË°®" %}
.

```sql
mysql> SELECT a.ename, a.sal, a.deptno, b.avgsal
    -> FROM   emp a JOIN(SELECT deptno, AVG(sal) avgsal
    ->                   FROM emp
    ->                   GROUP BY deptno) b
    ->               ON (a.deptno = b.deptno)
    -> WHERE  a.sal < b.avgsal;/*
+--------+---------+--------+-------------+
| ename  | sal     | deptno | avgsal      |
+--------+---------+--------+-------------+
| SMITH  |  800.00 |     20 | 2175.000000 |
| MARTIN | 1250.00 |     30 | 1900.000000 |
| CLARK  | 2450.00 |     10 | 2916.666667 |
| TURNER | 1500.00 |     30 | 1900.000000 |
| ADAMS  | 1100.00 |     20 | 2175.000000 |
| MILLER | 1300.00 |     10 | 2916.666667 |
+--------+---------+--------+-------------+
6 rows in set (0.00 sec)*/
```
{% endtab %}
{% endtabs %}



## Á¥¢Âºïindex

p.205

## ‰ΩúÊ•≠Á∑¥ÁøíÔºçDDL\(p.191\)

1. Áî®‰∏ãÂàóË≥áÊñôÊñ∞Âª∫DEPARTMENTË≥áÊñôË°®  
   `column name	null?		data type`

   `id		NOT NULL	NUMERIC(7)`

   `name		NOT NULL	VARCHAR(24)`

2. Âà©Áî®DEPTË≥áÊñôË°®ÔºåÂ∞áË≥áÊñôÊñ∞Â¢ûËá≥DEPARTMENTË≥áÊñôË°®‰∏≠\(Âè™Êñ∞Â¢ûÁõ∏Â∞çÁöÑË≥áÊñôÊ¨Ñ\)
3. Âà©Áî®‰∏ãÂàóË≥áÊñôÊñ∞Âª∫EMPLOYEEË≥áÊñôË°®  
   `column name	Null?		data Type`

   `id		NOT NULL	NUM*ERIC(7)`

   `last_nam*e	NOT NULL	VARCHAR(24)`

   `first_name		 	VARCHAR(24)`

   `dept_id	 			NUMERIC(7)`

4. Â∞áEMPLOYEEË≥áÊñôË°®‰∏≠last\_nameÊ¨Ñ‰ΩçË≥áÊñôÂûãÊÖãÊõ¥ÊîπÁÇ∫varchar\(40\)
5. ‰ΩøÁî®EMPË≥áÊñôË°®ÁµêÊßã‰∏≠EMPNO,ENAME, DEPTNOÂÆöÁæ©‰æÜÊñ∞Âª∫EMPLOYEE2Ë≥áÊñôË°® ‰∏¶Â∞áÊ¨Ñ‰ΩçÂêçÁ®±Ë®≠ÂÆöÁÇ∫id, last\_name,dept\_id
6. Âà™Èô§Êï¥ÂÄãEMPLOYEEË≥áÊñôË°®
7. Â∞áEMPLOYEE2Ë≥áÊñôË°®ÊîπÂêçÁÇ∫EMPLOYEE
8. Â∞áEMPLOYEEË≥áÊñôË°®‰∏≠ÁöÑLAST\_NAMEÊ¨Ñ‰ΩçÂà™Èô§
9. ‰øÆÊîπEMPLOYEEË≥áÊñôË°®ÔºåÊñ∞Â¢û‰∏ÄÂÄãÊ¨Ñ‰ΩçSALARYË≥áÊñôÂûãÊÖãÁÇ∫NUMERIC , precision 7
10. ‰øÆÊîπEMPLOYEEË≥áÊñôË°®Ôºå‰ΩøÁî®IDÊ¨Ñ‰ΩçÊñ∞Â¢û‰∏ÄÂÄãprimary keyÈôêÂà∂Ê¢ù‰ª∂Ôºå‰∏¶ÁÇ∫‰ªñÂëΩÂêç
11. Âú®EMPLOYEEË≥áÊñôË°®Êñ∞Â¢û‰∏ÄÂÄãÂ§ñÈÉ®Èçµ\(foreign key\)‰ª•Á¢∫‰øùÂì°Â∑•‰∏çÊúÉË¢´ÂàÜÊ¥æÂà∞‰∏ÄÂÄã‰∏çÂ≠òÂú®ÁöÑÈÉ®ÈñÄ„ÄÇ

{% tabs %}
{% tab title="1" %}
```text
/*Áî®‰∏ãÂàóË≥áÊñôÊñ∞Âª∫DEPARTMENTË≥áÊñôË°®
column name	null?		data type
id		NOT NULL	NUMERIC(7)
name		NOT NULL	VARCHAR(24)*/

CREATE TABLE department 
	(id NUMERIC(7) NOT NULL, 
	 name VARCHAR(24) NOT NULL); 
```
{% endtab %}

{% tab title="2" %}
```
-- Âà©Áî®DEPTË≥áÊñôË°®ÔºåÂ∞áË≥áÊñôÊñ∞Â¢ûËá≥DEPARTMENTË≥áÊñôË°®‰∏≠(Âè™Êñ∞Â¢ûÁõ∏Â∞çÁöÑË≥áÊñôÊ¨Ñ)
INSERT INTO department(id, name) 
	SELECT deptno, dname FROM dept;
```
{% endtab %}

{% tab title="3" %}
```
/*Âà©Áî®‰∏ãÂàóË≥áÊñôÊñ∞Âª∫EMPLOYEEË≥áÊñôË°®
column name	Null?		data Type
id		NOT NULL	NUMERIC(7)
last_name	NOT NULL	VARCHAR(24)
first_name		 	VARCHAR(24)
dept_id	 			NUMERIC(7)*/

CREATE TABLE employee 
	(id NUMERIC(7) NOT NULL, 
     last_name VARCHAR(24) NOT NULL, 
     frist_name VARCHAR(24), 
     deptno NUMERIC(7)); 
```
{% endtab %}

{% tab title="4" %}
```
-- Â∞áEMPLOYEEË≥áÊñôË°®‰∏≠last_nameÊ¨Ñ‰ΩçË≥áÊñôÂûãÊÖãÊõ¥ÊîπÁÇ∫varchar(40)
ALTER TABLE employee 
	CHANGE COLUMN last_name last_name VARCHAR(40);

```
{% endtab %}

{% tab title="5" %}
```
/*‰ΩøÁî®EMPË≥áÊñôË°®ÁµêÊßã‰∏≠EMPNO,ENAME, DEPTNOÂÆöÁæ©‰æÜÊñ∞Âª∫EMPLOYEE2Ë≥áÊñôË°®
‰∏¶Â∞áÊ¨Ñ‰ΩçÂêçÁ®±Ë®≠ÂÆöÁÇ∫id, last_name,dept_id*/


CREATE TABLE employee2 
	SELECT empno AS id, 
		   ename AS last_name, 
           deptno AS dept_id 
	FROM emp;
```
{% endtab %}

{% tab title="6" %}
```
-- Âà™Èô§Êï¥ÂÄãEMPLOYEEË≥áÊñôË°®
DROP TABLE employee;
```
{% endtab %}

{% tab title="7" %}
```
-- Â∞áEMPLOYEE2Ë≥áÊñôË°®ÊîπÂêçÁÇ∫EMPLOYEE
ALTER TABLE employee2 
	RENAME AS employee;

```
{% endtab %}

{% tab title="8" %}
```
-- Â∞áEMPLOYEEË≥áÊñôË°®‰∏≠ÁöÑLAST_NAMEÊ¨Ñ‰ΩçÂà™Èô§
ALTER TABLE employee 
	DROP last_name;
```
{% endtab %}

{% tab title="9" %}
```
-- ‰øÆÊîπEMPLOYEEË≥áÊñôË°®ÔºåÊñ∞Â¢û‰∏ÄÂÄãÊ¨Ñ‰ΩçSALARYË≥áÊñôÂûãÊÖãÁÇ∫NUMERIC , precision 7
ALTER TABLE employee 
	ADD salary NUMERIC(7);
```
{% endtab %}

{% tab title="10" %}
```
-- ‰øÆÊîπEMPLOYEEË≥áÊñôË°®Ôºå‰ΩøÁî®IDÊ¨Ñ‰ΩçÊñ∞Â¢û‰∏ÄÂÄãprimary keyÈôêÂà∂Ê¢ù‰ª∂Ôºå‰∏¶ÁÇ∫‰ªñÂëΩÂêç
ALTER TABLE employee 
	ADD CONSTRAINT pk_employee_id PRIMARY KEY(id);
```
{% endtab %}

{% tab title="11" %}
```
-- Âú®EMPLOYEEË≥áÊñôË°®Êñ∞Â¢û‰∏ÄÂÄãÂ§ñÈÉ®Èçµ(foreign key)‰ª•Á¢∫‰øùÂì°Â∑•‰∏çÊúÉË¢´ÂàÜÊ¥æÂà∞‰∏ÄÂÄã‰∏çÂ≠òÂú®ÁöÑÈÉ®ÈñÄ„ÄÇ

ALTER TABLE employee 
ADD CONSTRAINT fk_employee_deptid FOREIGN KEY(dept_id) REFERENCES dept(deptno);
```
{% endtab %}
{% endtabs %}

## ‰ΩúÊ•≠Á∑¥ÁøíÔºçDDL-view\(p.208\)

1. ‰ΩøÁî®EMPË≥áÊñôË°®‰∏≠Âì°Á∑®„ÄÅÂßìÂêç„ÄÅÈÉ®ÈñÄÁ∑®Ëôü Âª∫Á´ã‰∏ÄÂÄãEMP\_VU viewÔºå‰∏¶Â∞áÂßìÂêçÊ¨ÑÊîπ‰ª•EMPLOYEE
2. È°ØÁ§∫EMP\_VU view‰∏≠ÁöÑË≥áÊñôÂÖßÂÆπ
3. ‰ΩøÁî®EMP\_VU view‰æÜÈ°ØÁ§∫ÊâÄÊúâÂì°Â∑•ÂßìÂêçÂèäÈÉ®ÈñÄÁ∑®Ëôü„ÄÇ
4. Êñ∞Âª∫‰∏ÄÂÄãÂêçÁÇ∫DEPT20ÁöÑviewÔºåÂåÖÂê´ÈÉ®ÈñÄ20ÁöÑÊâÄÊúâÂì°Â∑•Á∑®Ëôü„ÄÅÂßìÂêç„ÄÅÈÉ®ÈñÄÁ∑®Ëôü„ÄÇÂ∞áviewË≥áÊñôÈ†ÖÁõÆÂëΩÂêçÁÇ∫employee\_id, employee, department\_idÔºå‰∏¶Ë®≠ÂÆö‰∏çÂÖÅË®±‰ΩøÁî®ËÄÖÈÄèÈÅéDEPT20‰æÜÊõ¥ÊîπÂì°Â∑•ÊâÄÂ±¨ÈÉ®ÈñÄÁ∑®Ëôü„ÄÇ
5. È°ØÁ§∫DEPT20 viewÊ¨Ñ‰ΩçÂÆöÁæ©Ë≥áÊñô\(ÁµêÊßã\)ÂèäÂÖ∂ÊâÄÊúâË≥áÊñôÂÖßÂÆπ„ÄÇ
6. Ë©¶Ë©¶ÁúãÂà©Áî®DEPT20 viewÂ∞áSmithËΩâË™øÂà∞ÈÉ®ÈñÄ30
7. Êñ∞Âª∫‰∏ÄÂÄãÂêçÁÇ∫SALARY\_VUÁöÑviewÔºåÂåÖÂê´ÊâÄÊúâÂì°Â∑•ÂßìÂêç„ÄÅÈÉ®ÈñÄÂêçÁ®±„ÄÅËñ™Ë≥á„ÄÅËñ™Ë≥áÁ≠âÁ¥ö„ÄÇ Â∞áview‰∏≠ÁöÑË≥áÊñôÈ†ÖÁõÆÂàÜÂà•ÂëΩÂêçÁÇ∫employee,department,salary,grade 

{% tabs %}
{% tab title="1" %}
```text
-- ‰ΩøÁî®EMPË≥áÊñôË°®‰∏≠Âì°Á∑®„ÄÅÂßìÂêç„ÄÅÈÉ®ÈñÄÁ∑®Ëôü Âª∫Á´ã‰∏ÄÂÄãEMP_VU viewÔºå‰∏¶Â∞áÂßìÂêçÊ¨ÑÊîπ‰ª•EMPLOYEE

```
{% endtab %}

{% tab title="2" %}
```
-- È°ØÁ§∫EMP_VU view‰∏≠ÁöÑË≥áÊñôÂÖßÂÆπ

```
{% endtab %}

{% tab title="3" %}
```
-- ‰ΩøÁî®EMP_VU view‰æÜÈ°ØÁ§∫ÊâÄÊúâÂì°Â∑•ÂßìÂêçÂèäÈÉ®ÈñÄÁ∑®Ëôü„ÄÇ

```
{% endtab %}

{% tab title="4" %}
```
/*Êñ∞Âª∫‰∏ÄÂÄãÂêçÁÇ∫DEPT20ÁöÑviewÔºåÂåÖÂê´ÈÉ®ÈñÄ20ÁöÑÊâÄÊúâÂì°Â∑•Á∑®Ëôü„ÄÅÂßìÂêç„ÄÅÈÉ®ÈñÄÁ∑®Ëôü„ÄÇ
Â∞áviewË≥áÊñôÈ†ÖÁõÆÂëΩÂêçÁÇ∫employee_id, employee, department_idÔºå
‰∏¶Ë®≠ÂÆö‰∏çÂÖÅË®±‰ΩøÁî®ËÄÖÈÄèÈÅéDEPT20‰æÜÊõ¥ÊîπÂì°Â∑•ÊâÄÂ±¨ÈÉ®ÈñÄÁ∑®Ëôü„ÄÇ*/

```
{% endtab %}

{% tab title="5" %}
```
-- È°ØÁ§∫DEPT20 viewÊ¨Ñ‰ΩçÂÆöÁæ©Ë≥áÊñô(ÁµêÊßã)ÂèäÂÖ∂ÊâÄÊúâË≥áÊñôÂÖßÂÆπ„ÄÇ

```
{% endtab %}

{% tab title="6" %}
```
-- Ë©¶Ë©¶ÁúãÂà©Áî®DEPT20 viewÂ∞áSmithËΩâË™øÂà∞ÈÉ®ÈñÄ30

```
{% endtab %}

{% tab title="7" %}
```
/*Êñ∞Âª∫‰∏ÄÂÄãÂêçÁÇ∫SALARY_VUÁöÑviewÔºåÂåÖÂê´ÊâÄÊúâÂì°Â∑•ÂßìÂêç„ÄÅÈÉ®ÈñÄÂêçÁ®±„ÄÅËñ™Ë≥á„ÄÅËñ™Ë≥áÁ≠âÁ¥ö„ÄÇ
Â∞áview‰∏≠ÁöÑË≥áÊñôÈ†ÖÁõÆÂàÜÂà•ÂëΩÂêçÁÇ∫employee,department,salary,grade*/

```
{% endtab %}
{% endtabs %}

